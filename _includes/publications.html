{% assign sorted_publications = site.publications | sort: 'year' | reverse %}
{% for publication in sorted_publications %}
{% assign tag_string = '' %}
{% if publication.tags %}
  {% assign sorted_tags = publication.tags | sort %}
  {% for tag in sorted_tags %}
    {% assign tag_slug = tag | replace: ' ', '-' | downcase | strip %}
    {% if forloop.first %}
      {% assign tag_string = tag_slug %}
    {% else %}
      {% assign tag_string = tag_string | append: ' ' | append: tag_slug %}
    {% endif %}
  {% endfor %}
{% endif %}
<div class="publication" data-tags="{{ tag_string | strip }}">
  <div class="publication-content">
    <h3 class="publication-title">{{ publication.title }}</h3>
    <div class="publication-authors">{{ publication.authors }}</div>
    <div class="publication-journal">
      <span class="publication-venue">{{ publication.journal }}</span>
      <span class="publication-year">{{ publication.year }}</span>
    </div>
    {% if publication.tags %}
    <div class="publication-tags">
      {% assign sorted_tags = publication.tags | sort %}
      {% for tag in sorted_tags %}
      <span class="tag tag-{{ tag | replace: ' ', '-' | downcase }}">{{ tag }}</span>
      {% endfor %}
    </div>
    {% endif %}
  </div>
  <div class="publication-links">
    {% if publication.doi %}
    <a href="{{ publication.doi }}" title="DOI" class="publication-link" target="_blank">
      <i class="fa fa-external-link-alt"></i>
    </a>
    {% endif %}
    {% if publication.pdf %}
    <a href="{{ publication.pdf }}" title="PDF" class="publication-link" target="_blank">
      <i class="fa fa-file-pdf"></i>
    </a>
    {% endif %}
  </div>
</div>
{% endfor %}
